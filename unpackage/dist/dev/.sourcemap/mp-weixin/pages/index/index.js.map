{"version":3,"sources":["webpack:///F:/UNIAPP最新版本的/uniapp-xiaomi/main.js","webpack:///F:/UNIAPP最新版本的/uniapp-xiaomi/pages/index/index.vue?c86e","webpack:///F:/UNIAPP最新版本的/uniapp-xiaomi/pages/index/index.vue?41fa","webpack:///F:/UNIAPP最新版本的/uniapp-xiaomi/pages/index/index.vue?f4df","webpack:///F:/UNIAPP最新版本的/uniapp-xiaomi/pages/index/index.vue?5606","webpack:///F:/UNIAPP最新版本的/uniapp-xiaomi/pages/index/index.vue"],"names":["createPage","Page","components","swiperImage","indexNav","threeAdv","card","commonList","data","scrollinto","scrollH","tabIndex","tabBars","newsitems","onLoad","uni","getSystemInfo","success","res","navbarH","upx2px","windowHeight","__init","methods","$H","get","then","category","arr","i","length","firstLoad","obj","list","loadtext","push","changeTab","index","addData","onChangeTab","e","detail","current","callback","id","page","Math","ceil","console","log","loadmore","item","showToast","title"],"mappings":"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","file":"pages/index/index.js","sourcesContent":["import 'uni-pages';import '@dcloudio/uni-stat';\n\nimport Vue from 'vue'            \nimport Page from './pages/index/index.vue'\ncreatePage(Page)","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=164a80d5&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\download\\\\HBuilderX.1.4.1.20181228\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"D:\\\\download\\\\HBuilderX.1.4.1.20181228\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('164a80d5', component.options)\n    } else {\n      api.reload('164a80d5', component.options)\n    }\n    module.hot.accept(\"./index.vue?vue&type=template&id=164a80d5&\", function () {\n      api.rerender('164a80d5', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"F:/UNIAPP最新版本的/uniapp-xiaomi/pages/index/index.vue\"\nexport default component.exports","export * from \"-!D:\\\\download\\\\HBuilderX.1.4.1.20181228\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-hbuilderx\\\\packages\\\\webpack-uni-nvue-loader\\\\lib\\\\templateLoader.js??vue-loader-options!D:\\\\download\\\\HBuilderX.1.4.1.20181228\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!D:\\\\download\\\\HBuilderX.1.4.1.20181228\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\download\\\\HBuilderX.1.4.1.20181228\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\download\\\\HBuilderX.1.4.1.20181228\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-custom-block-loader\\\\index.js??ref--0-1!D:\\\\download\\\\HBuilderX.1.4.1.20181228\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=template&id=164a80d5&\"","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!D:\\\\download\\\\HBuilderX.1.4.1.20181228\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\download\\\\HBuilderX.1.4.1.20181228\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\download\\\\HBuilderX.1.4.1.20181228\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\download\\\\HBuilderX.1.4.1.20181228\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\download\\\\HBuilderX.1.4.1.20181228\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-custom-block-loader\\\\index.js??ref--0-1!D:\\\\download\\\\HBuilderX.1.4.1.20181228\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\download\\\\HBuilderX.1.4.1.20181228\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\download\\\\HBuilderX.1.4.1.20181228\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\download\\\\HBuilderX.1.4.1.20181228\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\download\\\\HBuilderX.1.4.1.20181228\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\download\\\\HBuilderX.1.4.1.20181228\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-custom-block-loader\\\\index.js??ref--0-1!D:\\\\download\\\\HBuilderX.1.4.1.20181228\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=script&lang=js&\"","//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n\r\n\r\nimport $H from \"@/common/lib/request.js\"\r\n\r\nimport swiperImage from \"@/components/index/swiper-Image.vue\";\r\nimport indexNav from \"@/components/index/index-nav.vue\";\r\nimport threeAdv from \"@/components/index/three-adv.vue\";\r\nimport card from \"@/components/common/card.vue\";\r\nimport commonList from \"@/components/common/common.vue\";\r\nexport default {\r\n  components: {\r\n    swiperImage,\r\n    indexNav,\r\n    threeAdv,\r\n    card,\r\n    commonList\r\n  },\r\n  data() {\r\n    return {\r\n      scrollinto: \"\",\r\n      scrollH: 500,\r\n      tabIndex: 0,\r\n      tabBars: [],\r\n      newsitems: []\r\n\r\n\r\n    }\r\n  },\r\n  onLoad() {\r\n    // 获取可视区域高度\r\n    uni.getSystemInfo({\r\n      success: (res) => {\r\n        let navbarH\r\n\r\n\r\n\r\n\r\n        navbarH = uni.upx2px(90)\r\n\r\n        this.scrollH = res.windowHeight - uni.upx2px(82) - navbarH\r\n      }\r\n    })\r\n    // 初始化事件\r\n    this.__init()\r\n  },\r\n  methods: {\r\n    // 初始化事件\r\n    __init() {\r\n      // 获取顶部选项卡\r\n      $H.get('/index_category/data').then((res) => {\r\n        this.tabBars = res.category\r\n        // 根据顶部选项卡生成页面\r\n        let arr = []\r\n        for (var i = 0; i < this.tabBars.length; i++) {\r\n          let firstLoad = i === 0 ? 'after' : 'before'\r\n          let obj = {\r\n            list: [],\r\n            // 1.上拉加载更多 2.加载中... 3.没有更多了\r\n            loadtext: \"上拉加载更多\",\r\n            // 首次加载\r\n            firstLoad: firstLoad\r\n          }\r\n          // 获取首屏数据\r\n          if (i === 0) {\r\n            obj.list = res.data\r\n          }\r\n\r\n          arr.push(obj)\r\n        }\r\n        this.newsitems = arr\r\n      })\r\n    },\r\n    // 切换选项卡\r\n    changeTab(index) {\r\n      if (this.tabIndex === index) {\r\n        return;\r\n      }\r\n      this.tabIndex = index\r\n      this.scrollinto = 'tab' + index\r\n\r\n      if (this.newsitems[index].firstLoad == 'after') {\r\n        return\r\n      }\r\n\r\n      this.addData()\r\n    },\r\n    // 监听滑动列表\r\n    onChangeTab(e) {\r\n      this.changeTab(e.detail.current)\r\n    },\r\n    // 加载数据\r\n    async addData(callback) {\r\n      // 拿到当前索引\r\n      let index = this.tabIndex\r\n\r\n\r\n\r\n      // 拿到当前分类id\r\n      let id = this.tabBars[index].id\r\n\r\n      let obj = this.newsitems[index]\r\n      // 拿到当前分类的分页数 0 -> 1  \r\n      let page = (Math.ceil(obj.list.length / 5) + 1)\r\n\r\n\r\n      // 请求钱\r\n      if (page == 1) {\r\n        obj.loadtext = \"ing\"\r\n      }\r\n\r\n      let data = await this.$H.get(\"/index_category/\" + id + \"/data/\" + page)\r\n\r\n      if (page == 1) {\r\n\t\t//   请求完数据\r\n\t\tconsole.log(\"after\");\r\n\t\t\r\n        obj.firstLoad = 'after'\r\n      }\r\n\r\n\r\n      console.log(data)\r\n      if (data) {\r\n\r\n        // 请求数据库\r\n        obj.list = [...obj.list, ...data]\r\n        obj.loadtext = data.length < 5 ? \"没有更多了\" : '上啦加载更多'\r\n      }\r\n      //   执行回调\r\n      if (typeof callback == \"function\") {\r\n        callback()\r\n      }\r\n\r\n\r\n\r\n    },\r\n    // 上拉加载更多\r\n    loadmore(index) {\r\n      let item = this.newsitems[index]\r\n      // 是否处于可加载状态\r\n      if (item.loadtext !== '上拉加载更多') return;\r\n      // 模拟加载\r\n      item.loadtext = '加载中...'\r\n      //   setTimeout(() => {\r\n      //     // 加载数据\r\n      //     item.list = [...item.list, ...demo2];\r\n      //     // 恢复状态\r\n      //     item.loadtext = '上拉加载更多'\r\n      //   }, 2000);\r\n      this.addData(() => {\r\n\r\n        uni.showToast({\r\n          title: \"加载成功\"\r\n        })\r\n      })\r\n    }\r\n  }\r\n}\r\n"],"sourceRoot":""}